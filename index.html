<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f0f4ff;
            --text-primary: #1a1a1a;
            --text-secondary: #4a5568;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --slot-bg: #e8f0fe;
            --shadow: rgba(59, 130, 246, 0.2);
        }

        [data-theme="dark"] {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a2e;
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --accent: #3b82f6;
            --accent-hover: #60a5fa;
            --slot-bg: #16213e;
            --shadow: rgba(59, 130, 246, 0.4);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            transition: background 0.3s, color 0.3s;
        }

        .header {
            width: 100%;
            max-width: 400px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .balance-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .balance {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
        }

        .add-coins-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .add-coins-btn:hover {
            background: var(--accent-hover);
            transform: scale(1.1);
        }

        .add-coins-btn:active {
            transform: scale(0.95);
        }

        .theme-toggle {
            background: var(--bg-secondary);
            border: 2px solid var(--accent);
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(180deg);
        }

        .casino-container {
            background: var(--bg-secondary);
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px var(--shadow);
            max-width: 400px;
            width: 100%;
        }

        .slot-machine {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .slot {
            width: 90px;
            height: 120px;
            background: var(--slot-bg);
            border: 3px solid var(--accent);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .slot-inner {
            transition: transform 0.1s ease-out;
        }

        .slot.spinning .slot-inner {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100px); }
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .bet-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bet-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-align: center;
        }

        .bet-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .bet-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .bet-btn:hover {
            background: var(--accent-hover);
        }

        .bet-btn:active {
            transform: scale(0.9);
        }

        .bet-amount {
            font-size: 24px;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
            color: var(--accent);
        }

        .spin-btn {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px var(--shadow);
        }

        .spin-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px var(--shadow);
        }

        .spin-btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .message {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
            min-height: 30px;
            color: var(--accent);
        }

        .message.win {
            color: #10b981;
            animation: pulse 0.5s ease-in-out;
        }

        .message.lose {
            color: #ef4444;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .coin-animation {
            position: fixed;
            font-size: 30px;
            pointer-events: none;
            animation: float-up 1s ease-out forwards;
        }

        @keyframes float-up {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="header">
        <div class="balance-container">
            <div class="balance">üí∞ <span id="balance">1000</span></div>
            <button class="add-coins-btn" id="addCoinsBtn">+</button>
        </div>
        <button class="theme-toggle" id="themeToggle">üåô</button>
    </div>

    <div class="casino-container">
        <div class="slot-machine">
            <div class="slot">
                <div class="slot-inner" id="slot1">üçí</div>
            </div>
            <div class="slot">
                <div class="slot-inner" id="slot2">üçã</div>
            </div>
            <div class="slot">
                <div class="slot-inner" id="slot3">üçä</div>
            </div>
        </div>

        <div class="controls">
            <div class="bet-container">
                <div class="bet-label">–°—Ç–∞–≤–∫–∞</div>
                <div class="bet-controls">
                    <button class="bet-btn" id="decreaseBet">‚àí</button>
                    <div class="bet-amount" id="betAmount">10</div>
                    <button class="bet-btn" id="increaseBet">+</button>
                </div>
            </div>
            <button class="spin-btn" id="spinBtn">üé∞ –ö–†–£–¢–ò–¢–¨</button>
        </div>

        <div class="message" id="message"></div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.ready();
        }

        // –°–∏–º–≤–æ–ª—ã –¥–ª—è —Å–ª–æ—Ç–æ–≤
        const symbols = ['üçí', 'üçã', 'üçä', 'üçá', 'üçâ', '‚≠ê', 'üíé'];
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let balance = 1000;
        let bet = 10;
        let isSpinning = false;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const balanceEl = document.getElementById('balance');
        const betAmountEl = document.getElementById('betAmount');
        const slot1 = document.getElementById('slot1');
        const slot2 = document.getElementById('slot2');
        const slot3 = document.getElementById('slot3');
        const spinBtn = document.getElementById('spinBtn');
        const messageEl = document.getElementById('message');
        const themeToggle = document.getElementById('themeToggle');
        const addCoinsBtn = document.getElementById('addCoinsBtn');
        const decreaseBetBtn = document.getElementById('decreaseBet');
        const increaseBetBtn = document.getElementById('increaseBet');

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function loadGame() {
            const savedBalance = localStorage.getItem('balance');
            const savedTheme = localStorage.getItem('theme');
            
            if (savedBalance) {
                balance = parseInt(savedBalance);
                updateBalance();
            }
            
            if (savedTheme) {
                document.body.setAttribute('data-theme', savedTheme);
                themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveGame() {
            localStorage.setItem('balance', balance.toString());
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function updateBalance() {
            balanceEl.textContent = balance;
            saveGame();
        }

        // –°–º–µ–Ω–∞ —Ç–µ–º—ã
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('theme', newTheme);
        });

        // –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—ã
        addCoinsBtn.addEventListener('click', () => {
            balance += 1000;
            updateBalance();
            showCoinAnimation();
            showMessage('+ 1000 –º–æ–Ω–µ—Ç! üéâ', 'win');
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç
        function showCoinAnimation() {
            const coin = document.createElement('div');
            coin.className = 'coin-animation';
            coin.textContent = 'ü™ô';
            coin.style.left = addCoinsBtn.offsetLeft + 'px';
            coin.style.top = addCoinsBtn.offsetTop + 'px';
            document.body.appendChild(coin);
            setTimeout(() => coin.remove(), 1000);
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
        decreaseBetBtn.addEventListener('click', () => {
            if (bet > 10) {
                bet -= 10;
                betAmountEl.textContent = bet;
            }
        });

        increaseBetBtn.addEventListener('click', () => {
            if (bet < balance && bet < 100) {
                bet += 10;
                betAmountEl.textContent = bet;
            }
        });

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text, type = '') {
            messageEl.textContent = text;
            messageEl.className = 'message ' + type;
            setTimeout(() => {
                messageEl.textContent = '';
                messageEl.className = 'message';
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
        async function spin() {
            if (isSpinning || balance < bet) {
                if (balance < bet) {
                    showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç! üò¢', 'lose');
                }
                return;
            }

            isSpinning = true;
            spinBtn.disabled = true;
            balance -= bet;
            updateBalance();
            messageEl.textContent = '';

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∞–Ω–∏–º–∞—Ü–∏–∏
            const slots = [slot1, slot2, slot3];
            slots.forEach(slot => slot.parentElement.classList.add('spinning'));

            // –ë—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ —Å–∏–º–≤–æ–ª–æ–≤
            const spinDuration = 2000;
            const intervalTime = 100;
            const iterations = spinDuration / intervalTime;
            
            let count = 0;
            const spinInterval = setInterval(() => {
                slots.forEach(slot => {
                    slot.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                });
                count++;
                
                if (count >= iterations) {
                    clearInterval(spinInterval);
                }
            }, intervalTime);

            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–æ—Ç—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏
            setTimeout(() => {
                slot1.parentElement.classList.remove('spinning');
                slot1.textContent = symbols[Math.floor(Math.random() * symbols.length)];
            }, 1500);

            setTimeout(() => {
                slot2.parentElement.classList.remove('spinning');
                slot2.textContent = symbols[Math.floor(Math.random() * symbols.length)];
            }, 2000);

            setTimeout(() => {
                slot3.parentElement.classList.remove('spinning');
                slot3.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                checkWin();
            }, 2500);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞
        function checkWin() {
            const symbol1 = slot1.textContent;
            const symbol2 = slot2.textContent;
            const symbol3 = slot3.textContent;

            let winAmount = 0;

            // –í—Å–µ —Ç—Ä–∏ —Å–∏–º–≤–æ–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç
            if (symbol1 === symbol2 && symbol2 === symbol3) {
                if (symbol1 === 'üíé') {
                    winAmount = bet * 10; // x10 –¥–ª—è –∞–ª–º–∞–∑–∞
                } else if (symbol1 === '‚≠ê') {
                    winAmount = bet * 7; // x7 –¥–ª—è –∑–≤–µ–∑–¥—ã
                } else {
                    winAmount = bet * 5; // x5 –¥–ª—è —Ñ—Ä—É–∫—Ç–æ–≤
                }
            }
            // –î–≤–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç
            else if (symbol1 === symbol2 || symbol2 === symbol3 || symbol1 === symbol3) {
                winAmount = bet * 2; // x2 –∑–∞ –ø–∞—Ä—É
            }

            if (winAmount > 0) {
                balance += winAmount;
                updateBalance();
                showMessage(`–í—ã–∏–≥—Ä—ã—à: ${winAmount} –º–æ–Ω–µ—Ç! üéâ`, 'win');
            } else {
                showMessage('–ù–µ –ø–æ–≤–µ–∑–ª–æ! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ! üòî', 'lose');
            }

            isSpinning = false;
            spinBtn.disabled = false;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤—Ä–∞—â–µ–Ω–∏—è
        spinBtn.addEventListener('click', spin);

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        loadGame();
    </script>
</body>
</html>